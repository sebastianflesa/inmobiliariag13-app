<div class="container">
  <h1 class="text-center">Proyectos</h1>
  <div class="row justify-content-center">
    <div class="col-md-8">
      <div *ngIf="errorMessage" class="alert alert-danger" role="alert">
        {{ errorMessage }}
      </div>
      <ng-container *ngIf="!isLoading; else proyectosLoading">
        <table class="table table-striped">
          <thead>
            <tr>
              <th>Nombre</th>
              <th>Descripción</th>
              <th>Ubicación</th>
              <th>Fecha de inicio</th>
              <th>Fecha de fin</th>
              <th>Estado</th>
              <th>Acciones</th>
            </tr>
          </thead>
          <tbody>
            <tr *ngFor="let proyecto of proyectos">
              <td>{{ proyecto.nombre }}</td>
              <td>{{ proyecto.descripcion }}</td>
              <td>{{ proyecto.ubicacion }}</td>
              <td>{{ proyecto.fecha_inicio }}</td>
              <td>{{ proyecto.fecha_fin }}</td>
              <td>{{ proyecto.estado }}</td>
              <td>
                <button class="btn btn-primary" (click)="editarProyecto(proyecto)">Editar</button>
                <button class="btn btn-danger" (click)="eliminarProyecto(proyecto)">Eliminar</button>
              </td>
            </tr>
          </tbody>
        </table>
      </ng-container>
      <ng-template #proyectosLoading>
        <div class="text-center my-4">
          <div class="spinner-border text-primary" role="status">
            <span class="visually-hidden">Cargando...</span>
          </div>
          <p class="mt-2 mb-0">Cargando proyectos...</p>
        </div>
      </ng-template>
      <button class="btn btn-success" (click)="mostrarFormularioCrear()">Crear Proyecto</button>
      <div *ngIf="mostrarFormulario">
        <form [formGroup]="proyectoForm">
          <div class="form-group">
            <label>Nombre:</label>
            <input formControlName="nombre" type="text" class="form-control">
          </div>
          <div class="form-group">
            <label>Descripción:</label>
            <input formControlName="descripcion" type="text" class="form-control">
          </div>
          <div class="form-group">
            <label>Ubicación:</label>
            <input formControlName="ubicacion" type="text" class="form-control">
          </div>
          <div class="form-group">
            <label>Fecha de inicio:</label>
            <input formControlName="fecha_inicio" type="date" class="form-control">
          </div>
          <div class="form-group">
            <label>Fecha de fin:</label>
            <input formControlName="fecha_fin" type="date" class="form-control">
          </div>
          <div class="form-group">
            <label>Estado:</label>
            <select formControlName="estado" class="form-control">
              <option value="En construcción">En construcción</option>
              <option value="En planificación">En planificación</option>
              <option value="Terminado">Terminado</option>
              <option value="En revisión">En revisión</option>
              <option value="Cancelado">Cancelado</option>
            </select>
          </div>
          <button class="btn btn-primary" (click)="crearProyecto()">Guardar</button>
          <button class="btn btn-secondary" (click)="mostrarFormulario = false">Cancelar</button>
        </form>
      </div>
      <div *ngIf="proyectoCreado">
        <p>Proyecto Registrado</p>
      </div>
      <div *ngIf="proyectoEditado">
        <p>Proyecto Editado</p>
      </div>
    </div>
  </div>
</div>
