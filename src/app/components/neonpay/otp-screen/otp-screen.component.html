<div class="otp-container">
    <h2>ğŸ” ValidaciÃ³n de Seguridad</h2>

    <!-- BotÃ³n para generar OTP -->
    <button *ngIf="!generated" (click)="generarOtp()" [disabled]="loading">
        {{ loading ? 'â³ Generando cÃ³digo...' : 'ğŸ“± Generar CÃ³digo OTP' }}
    </button>

    <!-- Pantalla OTP generado -->
    <div *ngIf="generated">
        <p class="instruction">Ingresa el cÃ³digo de seguridad que aparece abajo:</p>

        <!-- OTP GENERADO - Visible para el usuario -->
        <div class="otp-display">
            <div class="otp-label">Tu cÃ³digo temporal:</div>
            <div class="otp-code">{{ generatedOtp }}</div>
        </div>

        <!-- Temporizador -->
        <div class="timer" *ngIf="timeRemaining > 0">
            â±ï¸ Expira en: <strong>{{ timeRemaining }}s</strong>
        </div>

        <div class="expired-message" *ngIf="timeRemaining === 0">
            âš ï¸ CÃ³digo expirado. Solicita uno nuevo.
        </div>

        <!-- Input para ingresar OTP -->
        <input type="text" maxlength="6" [(ngModel)]="otp" class="otp-input" placeholder="Ingresa los 6 dÃ­gitos"
            [disabled]="loading || timeRemaining === 0" autocomplete="off" />

        <!-- Botones de acciÃ³n -->
        <div class="button-group">
            <button class="btn-validate" (click)="validarOtp()"
                [disabled]="loading || otp.length !== 6 || timeRemaining === 0">
                {{ loading ? 'â³ Validando...' : 'âœ“ Validar CÃ³digo' }}
            </button>

            <button class="btn-resend" *ngIf="timeRemaining === 0" (click)="generarOtp()" [disabled]="loading">
                ğŸ”„ Generar Nuevo CÃ³digo
            </button>
        </div>
    </div>
</div>